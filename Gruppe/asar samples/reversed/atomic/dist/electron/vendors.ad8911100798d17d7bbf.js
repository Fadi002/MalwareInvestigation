(window.webpackJsonp=window.webpackJsonp||[]).push([[290],{5780:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(7369)),n(r(6226)),n(r(7404)),n(r(9722))},6226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6608),i=r(6203),a=r(5925),s=r(6611);t.WAVES_ID="WAVES";var o=a.libs.crypto,u=o.stringToBytes,c=o.base58Encode,l=function(e){return e===t.WAVES_ID?"":e};!function(e){var r;function a(e,t,r){return"function"!=typeof r?{from:e,to:t,cb:function(){return r}}:{from:e,to:t,cb:r}}function o(e){return e===t.WAVES_ID?"":e}!function(e){function t(e){switch(typeof e){case"string":case"number":return new i.BigNumber(e);case"object":return e instanceof i.BigNumber?e:e.getCoins()}}function r(e){return o(e.asset.id)}e.callFunc=function(e){return e?{function:e&&e.function||"",args:e&&e.args||[]}:null},e.payments=function(e){return(e||[]).map((function(e){return{amount:t(e).toString(),assetId:r(e)}}))},e.paymentsToNode=function(e){return(e||[]).map((function(e){return{amount:t(e),assetId:r(e)||null}}))},e.scriptProcessor=function(e){return(e||"").replace("base64:","")?e:null},e.assetPair=function(e){return{amountAsset:l(e.amount.asset.id),priceAsset:l(e.price.asset.id)}},e.signatureFromProof=function(e){return e[0]},e.toBigNumber=t,e.toNumberString=function(e){return t(e).toString()},e.toSponsorshipFee=function(e){var t=e.getCoins();return t.eq(0)?null:t},e.moneyToAssetId=function(e){return e.asset.id},e.moneyToNodeAssetId=r,e.timestamp=function(e){return+e||"string"!=typeof e?e&&e instanceof Date?e.getTime():e:Date.parse(e)},e.orString=function(e){return e||""},e.noProcess=function(e){return e},e.recipient=function(e){return function(t){return t.length<=30?"alias:"+e+":"+t:t}},e.attachment=function(e){var t=e=e||"";return"string"==typeof e&&(t=u(e)),c(Uint8Array.from(t))},e.addValue=function(e){return"function"==typeof e?e:function(){return e}},e.expiration=function(e){return e||(new Date).setDate((new Date).getDate()+20)},e.transfers=function(e,t){return function(r){return r.map((function(r){return{recipient:e(r.recipient),amount:t(r.amount)}}))}},e.quantity=function(e){return new i.BigNumber(e.quantity).mul(new i.BigNumber(10).pow(e.precision))},e.base64=function(e){return(e||"").replace("base64:","")},e.toOrderPrice=function(e){var t=new n.AssetPair(e.amount.asset,e.price.asset);return n.OrderPrice.fromTokens(e.price.toTokens(),t).getMatcherCoins()}}(r=e.processors||(e.processors={})),e.wrap=a,e.schema=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.map((function(e){return"string"==typeof e?{key:e,value:r.noProcess(t[e])}:{key:e.to,value:e.cb(e.from?t[e.from]:t)}})).reduce((function(e,t){return e[t.key]=t.value,e}),Object.create(null))}},e.signSchema=function(e){return function(t,n){void 0===n&&(n=!1);var i=[],o=e.map((function(e){var o=a(e.name,e.field,e.processor||r.noProcess),u={key:o.to,value:o.from?t[o.from]:t,optional:e.optional,optionalData:e.optionalData,type:e.type,name:e.name},c=s.VALIDATORS[u.type];try{return n&&c&&c(u),{key:u.key,value:o.cb(u.value)}}catch(e){i.push(e)}return{key:u.key,value:null}})).reduce((function(e,t){var r=t.key,n=t.value;return e[r]=n,e}),Object.create(null));if(i.length)throw new Error(JSON.stringify(i));return o}},e.idToNode=o}(t.prepare||(t.prepare={}))},6228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7406),i=function(){function e(t){t="string"==typeof t?t.charCodeAt(0):t,this.type=this.constructor.type,this._code=t||e._code||"W".charCodeAt(0)}return e.prototype.makeSignable=function(e){return new n.Signable(e,this)},e.prototype.isAvailable=function(){return Promise.resolve()},e.prototype.onDestroy=function(e){},e.prototype.getNetworkByte=function(){return this._code||e._code},e.initOptions=function(t){e._code=t.networkCode},e.getUserList=function(){return Promise.resolve([])},e.isAvailable=function(){return Promise.resolve(!1)},e.type="seed",e}();t.Adapter=i},6554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6203),i=r(11825),a=r(5780);function s(e){return null==e}function o(e,t,r){var n=i.path(["calculate_fee_rules",e,t],r);return s(n)?i.path(["calculate_fee_rules","default",t],r):n}t.find=function(e,t){for(var r=Object.keys(e),n=function(t){return r.every((function(r){return t[r]===e[r]}))},i=0;i<t.length;i++)if(n(t[i]))return t[i];return null},t.isEmpty=s,t.normalizeAssetId=function(e){return e||a.WAVES_ID},t.last=function(e){return e[e.length-1]},t.TRANSACTION_TYPE={GENESIS:1,PAYMENT:2,ISSUE:3,TRANSFER:4,REISSUE:5,BURN:6,EXCHANGE:7,LEASE:8,CANCEL_LEASE:9,ALIAS:10,MASS_TRANSFER:11,DATA:12,SET_SCRIPT:13,SPONSORSHIP:14,SET_ASSET_SCRIPT:15,SCRIPT_INVOCATION:16},t.currentCreateOrderFactory=function(e,t){return function(r,i,a){void 0===i&&(i=!1),void 0===a&&(a=[]);var s=i?new n.BigNumber(e.smart_account_extra_fee):new n.BigNumber(0),o=Object.values(r.assetPair).map((function(t){return t&&a.includes(t)?new n.BigNumber(e.smart_asset_extra_fee):new n.BigNumber(0)})).reduce((function(e,t){return e.add(t)}),new n.BigNumber(0));return t.add(s).add(o)}},t.currentFeeFactory=function(e){return function(r,a,s,u){var c=s?new n.BigNumber(e.smart_account_extra_fee):new n.BigNumber(0),l=c.add(o(r.type,"fee",e));switch(r.type){case t.TRANSACTION_TYPE.CANCEL_LEASE:case t.TRANSACTION_TYPE.ALIAS:case t.TRANSACTION_TYPE.LEASE:case t.TRANSACTION_TYPE.SET_ASSET_SCRIPT:case t.TRANSACTION_TYPE.SET_SCRIPT:case t.TRANSACTION_TYPE.SPONSORSHIP:return l;case t.TRANSACTION_TYPE.REISSUE:case t.TRANSACTION_TYPE.BURN:case t.TRANSACTION_TYPE.TRANSFER:return l.add(function(e,t,r){return e&&r.includes(e)?new n.BigNumber(t.smart_asset_extra_fee):new n.BigNumber(0)}(r.assetId,e,u||[]));case t.TRANSACTION_TYPE.MASS_TRANSFER:return l.add(function(e,t,r){var a=new n.BigNumber(o(e.type,"price_per_transfer",t)||0),s=i.path(["transfers","length"],e)||0,u=e.assetId&&r.includes(e.assetId)?new n.BigNumber(t.smart_asset_extra_fee):new n.BigNumber(0),c=new n.BigNumber(o(e.type,"min_price_step",t)),l=a.mul(s);l.div(c).isInt()||(l=l.div(c).roundTo(0,0).mul(c));return l.add(u)}(r,e,u||[]));case t.TRANSACTION_TYPE.DATA:return c.add(function(e,t,r){var i=o(t.type,"price_per_kb",r)||0;return new n.BigNumber(i).mul(Math.floor(1+(e.length-1)/1024))}(a,r,e));case t.TRANSACTION_TYPE.ISSUE:return function(e,t,r){var i=t.add(o(e.type,"fee",r));return function(e){var t=e.quantity,r=e.precision,i=e.decimals,a=e.reissuable,s=new n.BigNumber(t).eq(1),o=new n.BigNumber(r||i||0).eq(0);return!a&&o&&s}(e)?t.add(o(e.type,"nftFee",r)):i}(r,c,e);default:throw new Error("Wrong transaction type!")}}}},6611:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=r(5925),s=r(6608),o=r(6203),u=a.libs.crypto,c=u.stringToBytes,l=u.base58Decode,p=u.keccak,f=u.blake2b,_=140,d={AVAILABLE_CHARS:"-.0123456789@_abcdefghijklmnopqrstuvwxyz",MAX_ALIAS_LENGTH:30,MIN_ALIAS_LENGTH:4},S=45,E=4,m=16,y=1e3;t.ERROR_MSG={REQUIRED:"field is required",WRONG_TYPE:"field is wrong type",WRONG_NUMBER:"field is not number",WRONG_TIMESTAMP:"field is not timestamp",SMALL_FIELD:"field is small",LARGE_FIELD:"field is large",WRONG_SYMBOLS:"field has wrong symbols",WRONG_ADDRESS:"field is wrong address",WRONG_BOOLEAN:"field is wrong boolean",WRONG_ASSET_ID:"field is wrong assetId",WRONG_ORDER_TYPE:'field is wrong order type. Field can be "buy" or "sell"',NOT_HTTPS_URL:"field can be url with https protocol",BASE64:'field can be base64 string with prefix "base64:"',EMPTY_BASE64:'field can be not empty base64"'},t.isValidAddress=function(e,t){if(!e||"string"!=typeof e)throw new Error("Missing or invalid address");var r=l(e);if(1!==r[0]||r[1]!==t)return!1;for(var n=r.slice(0,22),i=r.slice(22,26),a=p(f(n)).slice(0,4),s=0;s<4;s++)if(i[s]!==a[s])return!1;return!0};var R=function(e){return c(e)},N=function(e){return e&&"number"==typeof e?e.toString():e},h=function(e,t){var r=e.value,n=i(e,["value"]);throw{value:r,field:n.name,type:n.type,message:t}},T=function(e){var r=e.value;e.optional||null!=r||h(e,t.ERROR_MSG.REQUIRED)},A=function(e){e=n({},e,{value:N(e.value)}),T(e);var r=e.value;if(!e.optional&&null==r&&null!=r&&"string"!=typeof r)return h(e,t.ERROR_MSG.WRONG_TYPE)},g=function(e){T(e);var r=e.value;if(null!=r&&"boolean"!=typeof r)return h(e,t.ERROR_MSG.WRONG_BOOLEAN)},I=function(e){T(e);var r=e.value;if(null!=r)switch(!0){case!(r instanceof s.Money):return h(e,t.ERROR_MSG.WRONG_TYPE);case r instanceof s.Money&&r.getCoins().isNaN():return h(e,t.ERROR_MSG.WRONG_NUMBER)}},O=function(e,r,n){T(e);var i=e.value;if(null!=i){var a=function(i){null!=r&&i.lt(new o.BigNumber(r))&&h(e,t.ERROR_MSG.SMALL_FIELD),null!=n&&i.gt(new o.BigNumber(n))&&h(e,t.ERROR_MSG.LARGE_FIELD)};switch(!0){case i instanceof o.BigNumber:i.isNaN()&&h(e,t.ERROR_MSG.WRONG_TYPE),a(i);break;case i instanceof s.Money:var u=i.getCoins();u.isNaN()&&h(e,t.ERROR_MSG.WRONG_NUMBER),a(u);break;case"string"==typeof i&&!i:h(e,t.ERROR_MSG.WRONG_NUMBER);break;case new o.BigNumber(i).isNaN():return h(e,t.ERROR_MSG.WRONG_NUMBER);default:a(new o.BigNumber(i))}}},P=function(e){e=n({},e,{value:N(e.value)}),T(e);var r=e.value;if(null==r)return null;switch(!0){case"string"!=typeof r:return h(e,t.ERROR_MSG.WRONG_TYPE);case r.length<d.MIN_ALIAS_LENGTH:return h(e,t.ERROR_MSG.SMALL_FIELD);case r.length>d.MAX_ALIAS_LENGTH:return h(e,t.ERROR_MSG.LARGE_FIELD);case!r.split("").every((function(e){return d.AVAILABLE_CHARS.includes(e)})):return h(e,t.ERROR_MSG.WRONG_SYMBOLS)}},b=function(e){e=n({},e,{value:N(e.value)}),T(e);var r=e.value;if(null==r)return null;switch(!0){case"string"!=typeof r:return h(e,t.ERROR_MSG.WRONG_TYPE);case r.length<=d.MAX_ALIAS_LENGTH:return h(e,t.ERROR_MSG.SMALL_FIELD);case r.length>S:return h(e,t.ERROR_MSG.LARGE_FIELD);case!function(r){try{return t.isValidAddress(r,e.optionalData)}catch(e){return!1}}(r):return h(e,t.ERROR_MSG.WRONG_ADDRESS)}},v=function(e){try{P(e)}catch(t){b(e)}},G=function(e,r){T(e);var i=e.value;Array.isArray(i)||h(e,t.ERROR_MSG.WRONG_TYPE);var a=i.map((function(i,a){var s=i.key,o=i.type,u=i.value;if(!r)try{A(n({},e,{value:s,name:e.name+":"+a+":key",optional:!1}))}catch(e){return e}var c=n({},e,{name:e.name+":"+a+":value",optional:!1,value:u});try{switch(o){case"integer":O(c);break;case"boolean":g(c);break;case"binary":C(c);break;case"string":A(c);break;default:h(n({},e,{value:s,name:e.name+":"+a+":type"}),t.ERROR_MSG.WRONG_TYPE)}}catch(e){return e}})).filter((function(e){return e}));a.length&&h(e,a)},C=function(e){var r=e.value,n=void 0===r?"":r;n&&!n.includes("base64:")&&h(e,t.ERROR_MSG.BASE64),n&&!function(e){if(""===e)return!0;return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(e)}(n.replace("base64:",""))&&h(e,t.ERROR_MSG.BASE64)},w=function(e){C(e)};t.VALIDATORS={string:A,number:function(e){T(e);var r=e.value;if(null!=r&&new o.BigNumber(r).isNaN())return h(e,t.ERROR_MSG.WRONG_NUMBER)},required:T,numberLike:O,money:I,aliasName:P,address:b,boolean:g,assetId:function(e){e=n({},e,{value:N(e.value)}),T(e);var r=e.value;if(null==r)return null;if("string"!=typeof r)return h(e,t.ERROR_MSG.WRONG_TYPE);var i=!1;try{i=32===l(r.trim()).length}catch(e){i=!1}return i||"WAVES"===r?void 0:h(e,t.ERROR_MSG.WRONG_ASSET_ID)},timestamp:function(e){T(e);var r=e.value;if((isNaN(r)||r&&!(r instanceof Date||"number"==typeof r||+r))&&("string"!=typeof r||isNaN(Date.parse(r))))return h(e,t.ERROR_MSG.WRONG_TIMESTAMP)},orderType:function(e){T(e);var r=e.value;return null==r?null:"string"!=typeof r?h(e,t.ERROR_MSG.WRONG_TYPE):"sell"!==r&&"buy"!==r?h(e,t.ERROR_MSG.WRONG_ORDER_TYPE):void 0},assetName:function(e){e=n({},e,{value:N(e.value)}),T(e);var r=e.value;if(null!=r){"string"!=typeof r&&h(e,t.ERROR_MSG.WRONG_TYPE);var i=R(r).length;i<E&&h(e,t.ERROR_MSG.SMALL_FIELD),i>m&&h(e,t.ERROR_MSG.LARGE_FIELD)}},assetDescription:function(e){e=n({},e,{value:N(e.value)}),T(e);var r=e.value;null!=r&&("string"!=typeof r&&h(e,t.ERROR_MSG.WRONG_TYPE),R(r).length>y&&h(e,t.ERROR_MSG.LARGE_FIELD))},httpsUrl:function(e){T(e);var r=e.value;if(null==r)return null;switch(!0){case"string"!=typeof r:h(e,t.ERROR_MSG.WRONG_TYPE);break;case-1===r.indexOf("https://"):case function(e){try{return new URL(e),!1}catch(e){return!0}}(r):h(e,t.ERROR_MSG.NOT_HTTPS_URL)}},attachment:function(e){var r=e.value;if(null!=r)if("string"!=typeof r&&"number"!=typeof r)if("object"!=typeof r)h(e,t.ERROR_MSG.WRONG_TYPE);else switch(!0){case"number"!=typeof r.length||r.length<0:h(e,t.ERROR_MSG.WRONG_TYPE);break;case r.length>_:h(e,t.ERROR_MSG.LARGE_FIELD)}else switch(A(e),!0){case"string"!=typeof r:h(e,t.ERROR_MSG.WRONG_TYPE);break;case R(r).length>_:h(e,t.ERROR_MSG.LARGE_FIELD)}},transfers:function(e){T(e);var r=e.value;Array.isArray(r)||h(e,t.ERROR_MSG.WRONG_TYPE),e.optional||0!==r.length||h(e,t.ERROR_MSG.REQUIRED);var i=(r||[]).map((function(t,r){var i=t.recipient,a=t.amount,s=t.name,o=[];try{O(n({},e,{value:a,name:e.name+":"+r+":amount",optional:!1}))}catch(e){o.push(e)}try{v(n({},e,{value:i||s,name:e.name+":"+r+":recipient",optional:!1}))}catch(e){o.push(e)}return o})).filter((function(e){return e.length}));i.length&&(h(e,i),h(e,i))},aliasOrAddress:v,data:G,script:w,asset_script:function(e){var r=e.value;r&&r.replace("base64:","")||h(e,t.ERROR_MSG.EMPTY_BASE64),w(e)},binary:C,precision:function(e){T(e),O(e,0,8)},call:function(e){T(e);var r=e.value;if(null!=r){r&&"object"==typeof r||h(e,t.ERROR_MSG.WRONG_TYPE);var n={key:"call.function",value:r.function,optional:!1,type:"string",name:"function"};A(n);var i={key:"call.args",value:r.args,optional:!0,type:"args",name:"args"};i.value&&G(i,!0)}},payment:function(e){T(e);var r=e.value;"object"==typeof r&&"number"==typeof r.length&&r.forEach||h(e,t.ERROR_MSG.WRONG_TYPE);var i=(r||[]).map((function(t,r){var i=[];try{I(n({},e,{value:t,name:e.name+":"+r,optional:!1}))}catch(e){i.push(e)}return i})).filter((function(e){return e.length}));i.length&&(h(e,i),h(e,i))}}},7369:function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(5925),o=r(5925),u=r(7402),c=r(6226).prepare.processors,l=r(6608),p=s.libs.marshall.serializePrimitives,f=p.LEN,_=p.SHORT,d=p.STRING,S=p.LONG,E=p.BASE58_STRING,m=s.libs.marshall.binary,y=function(e,t){var r=u.toNode(e);return r.timestamp=new Date(r.timestamp).getTime(),t?t(r):r},R=function(e){var t=(e||"").replace("base64:","");return t?"base64:"+t:null};!function(e){e[e.SEND_OLD=2]="SEND_OLD",e[e.ISSUE=3]="ISSUE",e[e.TRANSFER=4]="TRANSFER",e[e.REISSUE=5]="REISSUE",e[e.BURN=6]="BURN",e[e.EXCHANGE=7]="EXCHANGE",e[e.LEASE=8]="LEASE",e[e.CANCEL_LEASING=9]="CANCEL_LEASING",e[e.CREATE_ALIAS=10]="CREATE_ALIAS",e[e.MASS_TRANSFER=11]="MASS_TRANSFER",e[e.DATA=12]="DATA",e[e.SET_SCRIPT=13]="SET_SCRIPT",e[e.SPONSORSHIP=14]="SPONSORSHIP",e[e.SET_ASSET_SCRIPT=15]="SET_ASSET_SCRIPT",e[e.SCRIPT_INVOCATION=16]="SCRIPT_INVOCATION"}(t.TRANSACTION_TYPE_NUMBER||(t.TRANSACTION_TYPE_NUMBER={})),function(e){e[e.AUTH=1e3]="AUTH",e[e.MATCHER_ORDERS=1001]="MATCHER_ORDERS",e[e.CREATE_ORDER=1002]="CREATE_ORDER",e[e.CANCEL_ORDER=1003]="CANCEL_ORDER",e[e.COINOMAT_CONFIRMATION=1004]="COINOMAT_CONFIRMATION",e[e.ISSUE=3]="ISSUE",e[e.TRANSFER=4]="TRANSFER",e[e.REISSUE=5]="REISSUE",e[e.BURN=6]="BURN",e[e.EXCHANGE=7]="EXCHANGE",e[e.LEASE=8]="LEASE",e[e.CANCEL_LEASING=9]="CANCEL_LEASING",e[e.CREATE_ALIAS=10]="CREATE_ALIAS",e[e.MASS_TRANSFER=11]="MASS_TRANSFER",e[e.DATA=12]="DATA",e[e.SET_SCRIPT=13]="SET_SCRIPT",e[e.SPONSORSHIP=14]="SPONSORSHIP",e[e.SET_ASSET_SCRIPT=15]="SET_ASSET_SCRIPT",e[e.SCRIPT_INVOCATION=16]="SCRIPT_INVOCATION"}(a=t.SIGN_TYPE||(t.SIGN_TYPE={}));var N=function(e){var t=e.orderId,r=e.id,n=e.senderPublicKey,i=e.sender,a=E(n||i),s=E(r||t);return Uint8Array.from(Array.from(a).concat(Array.from(s)))};t.SIGN_TYPES=((n={})[a.AUTH]={getBytes:{1:function(e){var t=e.host,r=e.data,n=f(_)(d)("WavesWalletAuthentication"),i=f(_)(d)(t||""),a=f(_)(d)(r||"");return Uint8Array.from(Array.from(n).concat(Array.from(i),Array.from(a)))}},adapter:"signRequest"},n[a.COINOMAT_CONFIRMATION]={getBytes:{1:function(e){var t=e.timestamp,r=e.prefix,n=f(_)(d)(r),i=S(t);return Uint8Array.from(Array.from(n).concat(Array.from(i)))}},adapter:"signRequest"},n[a.MATCHER_ORDERS]={getBytes:{1:function(e){var t=e.timestamp,r=e.senderPublicKey,n=E(r),i=S(t);return Uint8Array.from(Array.from(n).concat(Array.from(i)))}},adapter:"signRequest"},n[a.CREATE_ORDER]={getBytes:{0:m.serializeOrder,1:m.serializeOrder,2:m.serializeOrder,3:m.serializeOrder},toNode:function(e){var t=c.toOrderPrice(e);return e=i({},e,{price:l.Money.fromCoins(t,e.price.asset)}),y(e,o.order)},adapter:"signOrder"},n[a.CANCEL_ORDER]={getBytes:{0:N,1:N},adapter:"signRequest",toNode:function(e){return{orderId:e.orderId,sender:e.senderPublicKey,senderPublicKey:e.senderPublicKey,signature:e.proofs&&e.proofs[0]}}},n[a.TRANSFER]={getBytes:{2:m.serializeTx},toNode:function(e,t){return y(i({},e,{recipient:c.recipient(String.fromCharCode(t))(e.recipient),attachment:c.attachment(e.attachment)}),o.transfer)},adapter:"signTransaction"},n[a.ISSUE]={getBytes:{2:m.serializeTx},toNode:function(e){return y(i({},e,{quantity:e.amount||e.quantity,script:R(e.script)}),o.issue)},adapter:"signTransaction"},n[a.REISSUE]={getBytes:{2:m.serializeTx},toNode:function(e){var t=e.amount||e.quantity;return y(i({},e,{quantity:t}),o.reissue)},adapter:"signTransaction"},n[a.BURN]={getBytes:{2:m.serializeTx},toNode:function(e){var t=e.amount||e.quantity;return y(i({},e,{quantity:t}),o.burn)},adapter:"signTransaction"},n[a.EXCHANGE]={getBytes:{0:m.serializeTx,2:m.serializeTx},toNode:function(e){var t=y(e),r=e.buyOrder.signature||e.buyOrder.proofs[0],n=e.buyOrder.proofs?e.buyOrder.proofs:e.buyOrder.signature,a=i({},t.buyOrder,{signature:r,proofs:n}),s=e.sellOrder.signature||e.sellOrder.proofs[0],u=e.sellOrder.proofs?e.sellOrder.proofs:e.sellOrder.signature,c=i({},t.sellOrder,{signature:s,proofs:u});return o.exchange(i({},t,{order1:a,order2:c}))},adapter:"signTransaction"},n[a.LEASE]={getBytes:{2:m.serializeTx},toNode:function(e){return y(e,o.lease)},adapter:"signTransaction"},n[a.CANCEL_LEASING]={getBytes:{2:m.serializeTx},toNode:function(e){return y(e,o.cancelLease)},adapter:"signTransaction"},n[a.CREATE_ALIAS]={getBytes:{2:m.serializeTx},toNode:function(e){return i({},y(e,o.alias),{chainId:e.chainId})},adapter:"signTransaction"},n[a.MASS_TRANSFER]={getBytes:{0:m.serializeTx,1:m.serializeTx},toNode:function(e,t){return y(i({},e,{transfers:e.transfers.map((function(e){var r=c.recipient(String.fromCharCode(t))(e.name||e.recipient);return i({},e,{recipient:r})})),attachment:c.attachment(e.attachment)}),o.massTransfer)},adapter:"signTransaction"},n[a.DATA]={getBytes:{0:m.serializeTx,1:m.serializeTx},toNode:function(e){return y(e,o.data)},adapter:"signTransaction"},n[a.SET_SCRIPT]={getBytes:{0:m.serializeTx,1:m.serializeTx},toNode:function(e){return y(i({},e,{script:R(e.script)}),o.setScript)},adapter:"signTransaction"},n[a.SPONSORSHIP]={getBytes:{0:m.serializeTx,1:m.serializeTx},toNode:function(e){return y(e,o.sponsorship)},adapter:"signTransaction"},n[a.SET_ASSET_SCRIPT]={getBytes:{0:m.serializeTx,1:m.serializeTx},toNode:function(e){return y(i({},e,{script:R(e.script)}),o.setAssetScript)},adapter:"signTransaction"},n[a.SCRIPT_INVOCATION]={getBytes:{0:m.serializeTx,1:m.serializeTx},toNode:function(e){return y(e,o.invokeScript)},adapter:"signTransaction"},n)},7404:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6226),i=r(7369),a=r(9721),s=n.prepare.processors;t.getValidateSchema=function(e){var t;return(t={})[i.SIGN_TYPE.MATCHER_ORDERS]=[a.string()("senderPublicKey",null,null,!0),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.AUTH]=[a.string()("prefix",null,s.addValue("WavesWalletAuthentication"),!0),a.string()("host"),a.string()("data")],t[i.SIGN_TYPE.COINOMAT_CONFIRMATION]=[a.string()("prefix",null,s.addValue("Coinomat"),!0),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.CREATE_ORDER]=[a.string()("senderPublicKey",null,null,!0),a.string()("matcherPublicKey"),a.money()("amount","amountAsset",s.moneyToAssetId),a.money()("price","priceAsset",s.moneyToAssetId),a.orderType()("orderType"),a.money()("amount","amount",s.toBigNumber),a.fromData()(null,"price",s.toOrderPrice),a.money()("matcherFee",null,s.toBigNumber),a.timestamp()("expiration",null,s.expiration),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.CANCEL_ORDER]=[a.string()("senderPublicKey",null,null,!0),a.string()("id","orderId")],t[i.SIGN_TYPE.ISSUE]=[a.string()("senderPublicKey",null,null,!0),a.assetName()("name"),a.assetDescription()("description"),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.numberLike()("quantity",null,s.toBigNumber),a.precision()("precision"),a.boolean()("reissuable"),a.script()("script",null,s.orString,!0),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.REISSUE]=[a.string()("senderPublicKey",null,null,!0),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.asset()("assetId"),a.numberLike()("quantity",null,s.toBigNumber),a.boolean()("reissuable"),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.EXCHANGE]=[a.string()("senderPublicKey",null,null,!0),a.timestamp()("timestamp",null,s.timestamp),a.numberLike()("fee",null,s.toBigNumber),a.fromData()("buyOrder"),a.fromData()("sellOrder"),a.numberLike()("amount","amount",s.toBigNumber),a.numberLike()("price","price",s.toBigNumber),a.numberLike()("buyMatcherFee","buyMatcherFee",s.toBigNumber),a.numberLike()("sellMatcherFee","sellMatcherFee",s.toBigNumber)],t[i.SIGN_TYPE.BURN]=[a.string()("senderPublicKey",null,null,!0),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.asset()("assetId"),a.numberLike()("amount","quantity",s.toBigNumber),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.SPONSORSHIP]=[a.string()("senderPublicKey",null,null,!0),a.money()("minSponsoredAssetFee","assetId",s.moneyToAssetId),a.numberLike()("minSponsoredAssetFee",null,s.toBigNumber),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.TRANSFER]=[a.string()("senderPublicKey",null,null,!0),a.money()("amount","assetId",s.moneyToAssetId),a.required()("amount",null,s.toBigNumber),a.money()("fee","feeAssetId",s.moneyToAssetId),a.required()("fee","fee",s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp),a.aliasOrAddress(e)("recipient"),a.attachment()("attachment",null,s.orString,!0)],t[i.SIGN_TYPE.LEASE]=[a.string()("senderPublicKey",null,null,!0),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.aliasOrAddress(e)("recipient"),a.numberLike()("amount",null,s.toBigNumber),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.CANCEL_LEASING]=[a.string()("senderPublicKey",null,null,!0),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.string()("leaseId","transactionId"),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.CREATE_ALIAS]=[a.string()("senderPublicKey",null,null,!0),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.aliasName(e)("alias"),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.MASS_TRANSFER]=[a.string()("senderPublicKey",null,null,!0),a.money()("totalAmount","assetId",s.moneyToAssetId),a.transfers(e)("transfers",null,s.transfers(s.noProcess,s.toBigNumber)),a.numberLike()("fee",null,s.toBigNumber),a.attachment()("attachment",null,s.orString,!0),a.timestamp()("timestamp",null,s.timestamp)],t[i.SIGN_TYPE.DATA]=[a.string()("senderPublicKey",null,null,!0),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp),a.data()("data")],t[i.SIGN_TYPE.SET_SCRIPT]=[a.string()("senderPublicKey",null,null,!0),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.script()("script")],t[i.SIGN_TYPE.SET_ASSET_SCRIPT]=[a.string()("senderPublicKey",null,null,!0),a.asset()("assetId"),a.numberLike()("fee",null,s.toBigNumber),a.timestamp()("timestamp",null,s.timestamp),a.number()("chainId",null,s.addValue((function(){return e})),!0),a.asset_script()("script")],t[i.SIGN_TYPE.SCRIPT_INVOCATION]=[a.number()("type",null,s.addValue((function(){return i.SIGN_TYPE.SCRIPT_INVOCATION})),!0),a.number()("version",null,s.addValue((function(){return 1})),!0),a.string()("senderPublicKey",null,null,!0),a.aliasOrAddress(e)("dApp"),a.call()("call","call",s.callFunc,!0),a.payment()("payment",null,s.payments,!0),a.numberLike()("fee",null,s.toNumberString),a.numberLike()("fee","assetId",s.moneyToAssetId),a.timestamp()("timestamp",null,s.timestamp),a.number()("chainId",null,s.addValue(e),!0)],t}},7405:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(6228)),n(r(7408)),n(r(7442)),n(r(9913))},7406:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,o)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(5780),o=r(6554),u=r(7407),c=r(9723),l=r(5925),p=r(7402),f=r(6203),_=r(5780),d=l.libs.crypto,S=d.base58Encode,E=d.blake2b,m=d.verifySignature,y=function(){function e(e,t){this._signMethod="signRequest",this._proofs=[];var r=t.getNetworkByte();this._forSign=n({},e),this.type=e.type,this._adapter=t;var i=s.getValidateSchema(r)[e.type];if(!i)throw new c.SignError("Can't find prepare api for tx type \""+e.type+'"!',u.ERRORS.UNKNOWN_SIGN_TYPE);this._forSign.data.timestamp=new Date(this._forSign.data.timestamp||Date.now()).getTime(),this._forSign.data.proofs&&(this._proofs=this._forSign.data.proofs.slice());var a=t.getSignVersions()[e.type];if(0===a.length)throw new c.SignError("Can't sign data with type "+this.type,u.ERRORS.NO_SUPPORTED_VERSIONS);o.isEmpty(this._forSign.data.version)&&(this._forSign.data.version=o.last(a));var l=this._forSign.data.version;if(!a.includes(l))throw new c.SignError("Can't sign data with type \""+this.type+'" and version "'+l+'"',u.ERRORS.VERSION_IS_NOT_SUPPORTED);if(!s.SIGN_TYPES[e.type].getBytes[l])throw new c.SignError("Can't find prepare api for tx type \""+e.type+'" with version '+l+"!",u.ERRORS.VERSION_IS_NOT_SUPPORTED);this._signMethod=s.SIGN_TYPES[e.type].adapter;try{this._preparedData=s.prepare.signSchema(i)(this._forSign.data,!0)}catch(e){throw new c.SignError(e.message,u.ERRORS.VALIDATION_FAILED)}this._bytePromise=this.getSignData().then((function(t){return s.SIGN_TYPES[e.type].getBytes[l](t)}))}return e.prototype.getOrderFee=function(e,t,r,n){return i(this,void 0,void 0,(function(){var i,u;return a(this,(function(a){switch(a.label){case 0:return this._forSign.type!==s.SIGN_TYPE.CREATE_ORDER?[3,2]:(i=o.currentCreateOrderFactory(e,t),u=i,[4,this.getDataForApi()]);case 1:return[2,u.apply(void 0,[a.sent(),r,n])];case 2:return[2]}}))}))},e.prototype.getFee=function(e,t,r){return i(this,void 0,void 0,(function(){var n,i,s;return a(this,(function(a){switch(a.label){case 0:return n=o.currentFeeFactory(e),[4,this.getSignData()];case 1:return i=a.sent(),[4,this.getBytes()];case 2:return s=a.sent(),[2,n(i,s,t,r)]}}))}))},e.prototype.getTxData=function(){return n({},this._forSign.data)},e.prototype.getSignData=function(){return i(this,void 0,void 0,(function(){var e,t,r,i;return a(this,(function(a){switch(a.label){case 0:return[4,this._adapter.getPublicKey()];case 1:return e=a.sent(),[4,this._adapter.getAddress()];case 2:return t=a.sent(),r=n({},this._preparedData,{senderPublicKey:e,sender:t},this._forSign.data,{type:this._forSign.type}),i=s.SIGN_TYPES[this._forSign.type].toNode||null,[2,i&&i(r,this._adapter.getNetworkByte())||r]}}))}))},e.prototype.getAssetIds=function(){return i(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return[4,this.getSignData()];case 1:switch(e=r.sent(),(t=Object.create(null))[s.WAVES_ID]=!0,t[o.normalizeAssetId(e.feeAssetId)]=!0,e.type){case s.SIGN_TYPE.CREATE_ORDER:t[o.normalizeAssetId(e.matcherFeeAssetId)]=!0,t[o.normalizeAssetId(e.assetPair.amountAsset)]=!0,t[o.normalizeAssetId(e.assetPair.priceAsset)]=!0;break;case _.TRANSACTION_TYPE_NUMBER.REISSUE:case _.TRANSACTION_TYPE_NUMBER.BURN:case _.TRANSACTION_TYPE_NUMBER.MASS_TRANSFER:case _.TRANSACTION_TYPE_NUMBER.SPONSORSHIP:case _.TRANSACTION_TYPE_NUMBER.TRANSFER:t[o.normalizeAssetId(e.assetId)]=!0;break;case _.TRANSACTION_TYPE_NUMBER.EXCHANGE:t[o.normalizeAssetId(e.order1.assetPair.amountAsset)]=!0,t[o.normalizeAssetId(e.order1.assetPair.priceAsset)]=!0,t[o.normalizeAssetId(e.order1.matcherFeeAssetId)]=!0,t[o.normalizeAssetId(e.order2.matcherFeeAssetId)]=!0;break;case _.TRANSACTION_TYPE_NUMBER.SCRIPT_INVOCATION:e.payment.forEach((function(e){t[o.normalizeAssetId(e.assetId)]=!0}))}return[2,Object.keys(t)]}}))}))},e.prototype.sign2fa=function(e){var t=this,r=e.code;return this._adapter.getAddress().then((function(n){return e.request({address:n,code:r,signData:t._forSign})})).then((function(e){return t._proofs.push(e),t}))},e.prototype.addProof=function(e){return-1!==this._proofs.indexOf(e)&&this._proofs.push(e),this},e.prototype.getHash=function(){return this._bytePromise.then((function(e){return S(E(e))}))},e.prototype.getId=function(){return this._bytePromise.then((function(e){var t=Array.from(e);return 10===e[0]&&(e=new Uint8Array([t[0]].concat(t.slice(36,-16)))),S(E(e))}))},e.prototype.sign=function(){var e=this;return this._makeSignPromise(),this._signPromise.then((function(){return e}))},e.prototype.getSignature=function(){return this._makeSignPromise(),this._signPromise},e.prototype.getBytes=function(){return this._bytePromise},e.prototype.getMyProofs=function(){var e=this;return Promise.all([this.getBytes(),this._adapter.getPublicKey()]).then((function(t){var r=t[0],n=t[1];return e._proofs.filter((function(e){try{return m(n,r,e)}catch(e){return!1}}))}))},e.prototype.hasMySignature=function(){return this.getMyProofs().then((function(e){return!!e.length}))},e.prototype.addMyProof=function(){var e=this;return this.hasMySignature().then((function(t){return t?e.getMyProofs().then((function(e){return e[e.length-1]})):e.getSignature().then((function(t){return e._proofs.push(t),t}))}))},e.prototype.getDataForApi=function(){return i(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return[4,this.getSignData()];case 1:return e=r.sent(),[4,this.addMyProof()];case 2:r.sent(),t=this._proofs.slice();try{return[2,p.convert(n({},e,{proofs:t}),(function(e){return new f.BigNumber(e)}))]}catch(r){return[2,n({},e,{proofs:t,signature:t[0]})]}return[2]}}))}))},e.prototype._makeSignPromise=function(){var e=this;return this._signPromise||(this._signPromise=this._bytePromise.then((function(t){return e._adapter[e._signMethod](t,e._getAmountPrecision(),e._forSign)})),this._signPromise.catch((function(){e._signPromise=void 0}))),this},e.prototype._getAmountPrecision=function(){var e=this._forSign.data;return e.amount&&e.amount.asset&&e.amount.asset.precision?e.amount.asset.precision:0},e}();t.Signable=y},7407:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UNKNOWN_SIGN_TYPE=0]="UNKNOWN_SIGN_TYPE",e[e.NO_SUPPORTED_VERSIONS=1]="NO_SUPPORTED_VERSIONS",e[e.VERSION_IS_NOT_SUPPORTED=2]="VERSION_IS_NOT_SUPPORTED",e[e.VALIDATION_FAILED=3]="VALIDATION_FAILED"}(t.ERRORS||(t.ERRORS={}))},7408:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(6228),s=r(9724),o=r(5780),u=function(e){function t(t){var r=e.call(this)||this;if(r._currentUser=t,!r._currentUser)throw"No selected user";return r}return i(t,e),t.prototype.isAvailable=function(){return this._isMyLedger()},t.prototype.getPublicKey=function(){return Promise.resolve(this._currentUser.publicKey)},t.prototype.getAddress=function(){return Promise.resolve(this._currentUser.address)},t.prototype.getSeed=function(){return Promise.reject(Error('Method "getSeed" is not available!'))},t.prototype.getAdapterVersion=function(){return t._ledger.getVersion()},t.prototype.signRequest=function(e){var r=this;return this._isMyLedger().then((function(){return t._ledger.signRequest(r._currentUser.id,e)}))},t.prototype.signTransaction=function(e,r){var n=this;return 15===e[0]?this.signData(e):this._isMyLedger().then((function(){return t._ledger.signTransaction(n._currentUser.id,{precision:r},e)}))},t.prototype.signOrder=function(e,r){var n=this;return this._isMyLedger().then((function(){return t._ledger.signOrder(n._currentUser.id,{precision:r},e)}))},t.prototype.signData=function(e){var r=this;return this._isMyLedger().then((function(){return t._ledger.signSomeData(r._currentUser.id,e)}))},t.prototype.getPrivateKey=function(){return Promise.reject("No private key")},t.prototype.getSignVersions=function(){var e;return(e={})[o.SIGN_TYPE.AUTH]=[1],e[o.SIGN_TYPE.MATCHER_ORDERS]=[1],e[o.SIGN_TYPE.CREATE_ORDER]=[1,2,3],e[o.SIGN_TYPE.CANCEL_ORDER]=[1],e[o.SIGN_TYPE.COINOMAT_CONFIRMATION]=[1],e[o.SIGN_TYPE.ISSUE]=[2],e[o.SIGN_TYPE.TRANSFER]=[2],e[o.SIGN_TYPE.REISSUE]=[2],e[o.SIGN_TYPE.BURN]=[2],e[o.SIGN_TYPE.EXCHANGE]=[],e[o.SIGN_TYPE.LEASE]=[2],e[o.SIGN_TYPE.CANCEL_LEASING]=[2],e[o.SIGN_TYPE.CREATE_ALIAS]=[2],e[o.SIGN_TYPE.MASS_TRANSFER]=[1],e[o.SIGN_TYPE.DATA]=[1],e[o.SIGN_TYPE.SET_SCRIPT]=[1],e[o.SIGN_TYPE.SPONSORSHIP]=[1],e[o.SIGN_TYPE.SET_ASSET_SCRIPT]=[1],e[o.SIGN_TYPE.SCRIPT_INVOCATION]=[1],e},t.prototype._isMyLedger=function(){var e=this;return t._ledger.getUserDataById(this._currentUser.id).then((function(t){if(t.address!==e._currentUser.address)throw{error:"Invalid ledger"}}))},t.getUserList=function(e,r){return void 0===e&&(e=1),void 0===r&&(r=1),t._ledger.getPaginationUsersData(e,r)},t.initOptions=function(e){a.Adapter.initOptions(e),this._ledger=new s.WavesLedger(e)},t.isAvailable=function(){return t._hasConnectionPromise||(t._hasConnectionPromise=t._ledger.probeDevice()),t._hasConnectionPromise.then((function(){return t._hasConnectionPromise=null,!0}),(function(e){return t._hasConnectionPromise=null,!1}))},t.type="ledger",t}(a.Adapter);t.LedgerAdapter=u},7442:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(6228),s=r(5925),o=r(5780),u=s.seedUtils.Seed,c=s.libs.crypto.signBytes,l=function(e){function t(t,r){var n,i=e.call(this,r)||this;if("string"==typeof t)n=t;else{var a=t,s=a.encryptionRounds;n=u.decryptSeedPhrase(a.encryptedSeed,a.password,s)}return i.seed=new u(n,String.fromCharCode(i.getNetworkByte())),i}return i(t,e),t.prototype.getSignVersions=function(){var e;return(e={})[o.SIGN_TYPE.AUTH]=[1],e[o.SIGN_TYPE.MATCHER_ORDERS]=[1],e[o.SIGN_TYPE.CREATE_ORDER]=[1,2,3],e[o.SIGN_TYPE.CANCEL_ORDER]=[0,1],e[o.SIGN_TYPE.COINOMAT_CONFIRMATION]=[1],e[o.SIGN_TYPE.ISSUE]=[2],e[o.SIGN_TYPE.TRANSFER]=[2],e[o.SIGN_TYPE.REISSUE]=[2],e[o.SIGN_TYPE.BURN]=[2],e[o.SIGN_TYPE.EXCHANGE]=[0,2],e[o.SIGN_TYPE.LEASE]=[2],e[o.SIGN_TYPE.CANCEL_LEASING]=[2],e[o.SIGN_TYPE.CREATE_ALIAS]=[2],e[o.SIGN_TYPE.MASS_TRANSFER]=[1],e[o.SIGN_TYPE.DATA]=[1],e[o.SIGN_TYPE.SET_SCRIPT]=[1],e[o.SIGN_TYPE.SPONSORSHIP]=[1],e[o.SIGN_TYPE.SET_ASSET_SCRIPT]=[1],e[o.SIGN_TYPE.SCRIPT_INVOCATION]=[1],e},t.prototype.getPublicKey=function(){return Promise.resolve(this.seed.keyPair.publicKey)},t.prototype.getPrivateKey=function(){return Promise.resolve(this.seed.keyPair.privateKey)},t.prototype.getAddress=function(){return Promise.resolve(this.seed.address)},t.prototype.getSeed=function(){return Promise.resolve(this.seed.phrase)},t.prototype.signRequest=function(e){return this._sign(e)},t.prototype.signTransaction=function(e,t){return this._sign(e)},t.prototype.signOrder=function(e,t){return this._sign(e)},t.prototype.signData=function(e){return this._sign(e)},t.prototype._sign=function(e){return Promise.resolve(c(this.seed.keyPair,e))},t.isAvailable=function(){return Promise.resolve(!0)},t.type="seed",t}(a.Adapter);t.SeedAdapter=l},7443:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7442),i=r(7408),a=r(7405);!function(e){e.Seed="seed",e.WavesKeeper="wavesKeeper",e.Ledger="ledger",e.Tresor="tresor"}(t.AdapterType||(t.AdapterType={})),t.adapterPriorityList=["wavesKeeper","ledger","tresor","seed"],t.adapterList=[n.SeedAdapter,i.LedgerAdapter,a.WavesKeeperAdapter]},9621:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,o)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};function a(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var s=r(6554);a(r(7405)),a(r(5780));var o=r(6611);t.isValidAddress=o.isValidAddress,a(r(7443)),a(r(7406)),a(r(7407)),a(r(6554));var u=r(7443);function c(e){return s.find({type:e},u.adapterList)}t.getAvailableList=function(){var e=this;return Promise.all(u.adapterPriorityList.map((function(t){return n(e,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,(e=c(t)).isAvailable()];case 1:return[2,r.sent()?e:null]}}))}))}))).then((function(e){return e.filter(Boolean)}))},t.getAdapterByType=c},9721:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return function(r,n,i,a){return void 0===n&&(n=r),void 0===i&&(i=null),void 0===a&&(a=!1),{name:r,field:n||r,optional:a,processor:i,type:e,optionalData:t}}};t.string=function(e){return n("string")},t.asset=function(e){return n("assetId")},t.assetName=function(e){return n("assetName")},t.assetDescription=function(e){return n("assetDescription")},t.precision=function(e){return n("precision")},t.number=function(e){return n("number")},t.address=function(e){return n("address",e)},t.aliasName=function(e){return n("aliasName",e)},t.aliasOrAddress=function(e){return n("aliasOrAddress",e)},t.money=function(e){return n("money")},t.numberLike=function(e){return n("numberLike")},t.attachment=function(e){return n("attachment")},t.httpsUrl=function(e){return n("httpsUrl")},t.timestamp=function(e){return n("timestamp")},t.orderType=function(e){return n("orderType")},t.fromData=function(e){return n("fromData")},t.boolean=function(e){return n("boolean")},t.transfers=function(e){return n("transfers",e)},t.data=function(e){return n("data")},t.script=function(e){return n("script")},t.asset_script=function(e){return n("asset_script")},t.required=function(e){return n("required")},t.call=function(e){return n("call")},t.payment=function(e){return n("payment")}},9722:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(5780),a=r(7404),s=r(6226);t.default=function(e,t){var r=a.getValidateSchema(t)[e.type],o=e.data.version||Object.keys(i.SIGN_TYPES[e.type].getBytes).sort().pop(),u=n({},s.prepare.signSchema(r)(e.data),e.data,{version:o,type:e.type}),c=i.SIGN_TYPES[e.type].toNode||null,l=c&&c(u,t)||u;return i.SIGN_TYPES[e.type].getBytes[Number(o)](l)}},9723:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(r,n){var i=e.call(this,r)||this;return i.code=n,Object.setPrototypeOf(i,t.prototype),i}return i(t,e),t}(Error);t.SignError=a},9913:function(e,t,r){"use strict";var n,i,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function o(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(s,o)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(6228),c=r(5780),l=r(6611),p=((i={})[c.SIGN_TYPE.AUTH]=[1],i[c.SIGN_TYPE.MATCHER_ORDERS]=[1],i[c.SIGN_TYPE.CREATE_ORDER]=[1,2,3],i[c.SIGN_TYPE.CANCEL_ORDER]=[1],i[c.SIGN_TYPE.COINOMAT_CONFIRMATION]=[1],i[c.SIGN_TYPE.ISSUE]=[2],i[c.SIGN_TYPE.TRANSFER]=[2],i[c.SIGN_TYPE.REISSUE]=[2],i[c.SIGN_TYPE.BURN]=[2],i[c.SIGN_TYPE.EXCHANGE]=[],i[c.SIGN_TYPE.LEASE]=[2],i[c.SIGN_TYPE.CANCEL_LEASING]=[2],i[c.SIGN_TYPE.CREATE_ALIAS]=[2],i[c.SIGN_TYPE.MASS_TRANSFER]=[1],i[c.SIGN_TYPE.DATA]=[1],i[c.SIGN_TYPE.SET_SCRIPT]=[1],i[c.SIGN_TYPE.SPONSORSHIP]=[1],i[c.SIGN_TYPE.SET_ASSET_SCRIPT]=[1],i[c.SIGN_TYPE.SCRIPT_INVOCATION]=[1],i),f=function(e){function t(r,n){var i=r.address,a=r.publicKey,s=e.call(this,n)||this;return s._onDestoryCb=[],s._needDestroy=!1,s._address=i,s._pKey=a,t._initExtension(),t.onUpdate((function(e){e.locked||e.account&&e.account.address===s._address||(s._needDestroy=!0,s._onDestoryCb.forEach((function(e){return e()})))})),s}return a(t,e),t.prototype.isAvailable=function(e){return void 0===e&&(e=!1),s(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,t.isAvailable(this.getNetworkByte())];case 1:return n.sent(),[4,t._api.publicState()];case 2:return r=n.sent(),t._updateState(r),r.locked?[2,e?Promise.resolve():Promise.reject({code:4,msg:"Keeper is locked"})]:r.account&&r.account.address===this._address?[2,Promise.resolve()]:[3,4];case 3:return n.sent(),[3,4];case 4:return[2,Promise.reject({code:5,msg:"Keeper has another active account"})]}}))}))},t.prototype.isLocked=function(){return s(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return[4,t.isAvailable()];case 1:return r.sent(),[4,t._api.publicState()];case 2:return e=r.sent(),t._updateState(e),e.locked?[2,Promise.resolve()]:[2]}}))}))},t.prototype.getSignVersions=function(){return t._txVersion},t.prototype.onDestroy=function(e){if(this._needDestroy)return e();this._onDestoryCb.push(e)},t.prototype.getPublicKey=function(){return Promise.resolve(this._pKey)},t.prototype.getAddress=function(){return Promise.resolve(this._address)},t.prototype.getSeed=function(){return Promise.reject(Error('Method "getSeed" is not available!'))},t.prototype.signRequest=function(e,r,n){return s(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.isAvailable(!0)];case 1:return e.sent(),[4,t._api.signRequest(t._serializedData(n))];case 2:return[2,e.sent()]}}))}))},t.prototype.signTransaction=function(e,r,n){return s(this,void 0,void 0,(function(){var e,r,i;return o(this,(function(a){switch(a.label){case 0:return[4,this.isAvailable(!0)];case 1:return a.sent(),[4,t._api.signTransaction(t._serializedData(n))];case 2:return e=a.sent(),r=JSON.parse(e),i=r.proofs,[2,r.signature||i.pop()]}}))}))},t.prototype.signOrder=function(e,r,n){return s(this,void 0,void 0,(function(){var e,r,i,a;return o(this,(function(s){switch(s.label){case 0:return[4,this.isAvailable(!0)];case 1:switch(s.sent(),n.type){case c.SIGN_TYPE.CREATE_ORDER:e=t._api.signOrder(t._serializedData(n));break;case c.SIGN_TYPE.CANCEL_ORDER:e=t._api.signCancelOrder(t._serializedData(n));break;default:return[2,t._api.signRequest(t._serializedData(n))]}return[4,e];case 2:return r=s.sent(),i=JSON.parse(r),a=i.proofs,[2,i.signature||a.pop()]}}))}))},t.prototype.signData=function(e){return s(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.isAvailable(!0)];case 1:return e.sent(),[2,Promise.resolve("")]}}))}))},t.prototype.getPrivateKey=function(){return Promise.reject("No private key")},t.isAvailable=function(e){return s(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return[4,t._initExtension()];case 1:if(i.sent(),!this._api)throw{code:0,message:"Install WavesKeeper"};if(!e&&!u.Adapter._code)throw{code:5,message:"Set adapter network code"};i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._api.publicState()];case 3:return n=i.sent(),t._updateState(n),n.txVersion&&(t._txVersion=n.txVersion),[3,5];case 4:return i.sent(),r={code:1,message:"No permissions"},[3,5];case 5:if(!r&&n&&(n.account?n.account.address&&l.isValidAddress(n.account.address,e||u.Adapter._code)||(r={code:3,message:"Selected network incorrect"}):r={code:2,message:"No accounts in waveskeeper"}),r)throw r;return[2,!0]}}))}))},t.getUserList=function(){return s(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.isAvailable()];case 1:return e.sent(),[2,t._api.publicState().then((function(e){return t._updateState(e),[e.account]}))]}}))}))},t.initOptions=function(e){u.Adapter.initOptions(e),this.setApiExtension(e.extension),this._initExtension();try{this._api.publicState().then(t._updateState)}catch(e){}},t.setApiExtension=function(e){var r;"function"==typeof e?r=e:e&&(r=function(){return e}),t._getApiCb=r},t.onUpdate=function(e){t._onUpdateCb.push(e)},t._updateState=function(e){for(var r=0,n=t._onUpdateCb;r<n.length;r++){(0,n[r])(e)}},t._initExtension=function(){var e=this;if(t._api||!t._getApiCb)return t._api.initialPromise;var r=t._getApiCb();return r?r.initialPromise.then((function(r){e._api=r,e._api.on("update",t._updateState),e._api.publicState().then((function(e){e.txVersion&&(t._txVersion=e.txVersion),t._updateState(e)}))})):void 0},t._serializedData=function(e){return JSON.parse(JSON.stringify(e,(function(e,t){return t instanceof Uint8Array?Array.from(t):t})))},t.type="wavesKeeper",t._onUpdateCb=[],t._txVersion=p,t}(u.Adapter);t.WavesKeeperAdapter=f}}]);